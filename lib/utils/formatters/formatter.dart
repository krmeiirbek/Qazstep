class TFormatter {
  /// IIN-нің форматында енгізілген мәнді тексереді:
  /// - Жалпы 12 таңба болуы керек.
  /// - Енгізу форматы: DDMMYYA0XXXX,
  ///   мұндағы DD - күн (1-31 аралығында, айға байланысты),
  ///         MM - ай (01-12),
  ///         YY - жыл (екі таңбалы),
  ///         A  - 3,4,5, немесе 6 таңбаларының бірі,
  ///         0  - 0,
  ///         XXXX - кез келген 4 сан.
  static String? checkIIN(String? iin) {
    // Жалпы ұзындығы 12 таңба болуы керек.
    if (iin == null) return 'ЖСН (ИИН) дұрыс енгізіңіз';
    if (iin.length != 12) return 'ЖСН (ИИН) дұрыс енгізіңіз';

    // Бастапқы 6 таңба тек күн, ай, жыл болады.
    // Жалпы құрылымды тексеретін өрнек:
    final RegExp regex = RegExp(r'^(\d{6})([3456])0(\d{4})$');
    if (!regex.hasMatch(iin)) return 'ЖСН (ИИН) дұрыс енгізіңіз';

    // Алғашқы 6 таңбаны күн, ай, жыл ретінде шығарып аламыз.
    int day = int.tryParse(iin.substring(0, 2)) ?? 0;
    int month = int.tryParse(iin.substring(2, 4)) ?? 0;
    // Екі таңбалы жылды қосымша тексеруді қажет етпейді, өйткені біз тек күн мен айды тексереміз.

    // Айдың дұрыстығын тексереміз.
    if (month < 1 || month > 12) return 'ЖСН (ИИН) дұрыс енгізіңіз';

    // Айға байланысты максималды күнді анықтаймыз.
    int maxDay;
    switch (month) {
      case 2:
        // Екі таңбалы жыл болғандықтан нақты есебі қиындау,
        // бірақ ең көп 29 күн болатынын болжаймыз.
        maxDay = 29;
        break;
      case 4:
      case 6:
      case 9:
      case 11:
        maxDay = 30;
        break;
      default:
        maxDay = 31;
    }

    if (day < 1 || day > maxDay) return 'ЖСН (ИИН) дұрыс енгізіңіз';

    return null;
  }
}
